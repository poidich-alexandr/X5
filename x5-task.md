# Тестовое задание: «Incident Inbox» — Frontend-only React-приложение

## Сценарий продукта

Вы разрабатываете внутренний **Incident Inbox** для небольшой логистической компании. Операторы получают инциденты от водителей (повреждённая посылка, задержка доставки, неверный адрес и т.п.) и должны быстро **триажить** их: просматривать детали, назначать статус/приоритет и добавлять заметки. Приложение используют сотрудники на ноутбуках/планшетах, иногда при нестабильном интернете, поэтому интерфейс должен быть отзывчивым и устойчивым к ошибкам.

---

## Технологический стек (обязательно)

- **React + TypeScript**
- **Vite**
- **Bun** как runtime и менеджер пакетов  
  - `bun install`  
  - `bun dev`  
  - `bun test`
- **React Router**
- **TanStack Query**
- **Тестирование**: **Vitest + React Testing Library** (запуск через Bun)
- **Lint/format**: **ESLint + Prettier**

---

## Данные/моки (обязательно)

Используйте мокированный HTTP-слой с **MSW (Mock Service Worker)**.

- Реализуйте небольшой “фейковый API” в MSW для инцидентов и комментариев/заметок (структуру вы выбираете сами).
- Сохранение изменений — **только в памяти** (после перезагрузки страницы допустим сброс, но при желании можно добавить `localStorage`).

---

## Что нужно сделать

SPA с двумя основными экранами:

1. **Список инцидентов** (inbox/triage)
2. **Детали инцидента** (просмотр + действия)

### Роуты (обязательно)

- `/incidents` — страница списка
- `/incidents/:id` — страница деталей
- Настройте разумный маршрут по умолчанию (например, редирект `/` на `/incidents`).

---

## Обязательные требования

### 1) Страница списка (`/incidents`)

Показать список/таблицу инцидентов минимум с полями:

- ID или референс
- Заголовок/краткое описание
- Статус (например, New / In Progress / Resolved — набор статусов на ваше усмотрение)
- Приоритет (например, Low / Medium / High — на ваше усмотрение)
- Дата/время создания (или “reported at”)
- Опционально: имя репортера/водителя

Взаимодействия:

- **Поиск** (по заголовку/описанию или ID — поведение и правила совпадения на ваше усмотрение)
- **Фильтр** по статусу и/или приоритету (сколько фильтров и какой UX — на ваше усмотрение)
- **Сортировка** (минимум один вариант, например, “сначала новые”)

Работа с данными:

- Загрузка инцидентов через MSW с помощью TanStack Query.
- Лоадинг- и error-состояния обязательны.

Навигация:

- Клик по инциденту ведёт на `/incidents/:id`.

---

### 2) Страница деталей (`/incidents/:id`)

Показать:

- Основные поля инцидента (title, description, status, priority, timestamps, reporter и т.п. — разумный набор на ваше усмотрение)
- Раздел “таймлайн” или “заметки/комментарии” (простой список достаточно)

Действия (обязательно):

- **Изменение статуса** инцидента
- **Изменение приоритета**
- **Добавление заметки/комментария** (небольшая форма)

Работа с данными:

- Загрузка деталей по ID через TanStack Query.
- Обновления делать через мутации в MSW.
- После обновления UI должен отражать изменения (стратегия на ваше усмотрение: invalidate, обновление кэша, optimistic и т.д.).

Краевые случаи:

- Если инцидент с таким ID не найден — показать состояние “Не найдено”.
- Обработать медленную загрузку и ошибки.

---

### 3) Базовый UX и доступность (обязательно)

- Основные сценарии должны быть доступны с клавиатуры.
- Доступные подписи (labels) для контролов форм и кнопок.
- Видимый фокус (достаточно дефолтного, если он не удалён).
- Empty state (например, “Нет инцидентов по выбранным фильтрам”).

---

### 4) Ожидания по качеству кода (обязательно)

- Понятная структура папок (архитектуру выбираете сами).
- Строгая типизация TypeScript (без повсеместного `any`; определить доменные типы).
- Разумные границы компонентов и переиспользование там, где уместно.
- Без излишней сложности, но “по-взрослому”.

---

## Nice-to-have (опционально)

Можно реализовать часть из списка:

- Пагинация или infinite scrolling (можно мокировать)
- Синхронизация фильтров/поиска/сортировки с URL (query params)
- Optimistic updates с откатом при ошибке
- Глобальный error boundary и/или route-level error UI
- Skeleton loading states
- `localStorage` для черновика заметки или последних фильтров
- Адаптивная вёрстка для небольших экранов
- Bulk select + массовое изменение статуса в списке (можно ограниченно)

---

## Требования к тестам (обязательно, минимум)

Используя **Vitest + React Testing Library**:

Написать **минимум 3 теста**, покрывающих смесь сценариев:

- Рендер списка и взаимодействия (поиск/фильтр/сортировка)
- Навигация на страницу деталей
- Мутация (например, смена статуса или добавление заметки) и обновление UI
- Error/empty state

MSW должен использоваться и в тестах для мока API.

---

## Формат сдачи (обязательно)

**Git-репозиторий**, содержащий:

- Исходный код
- **README.md** с:
  - Кратким описанием проекта
  - Инструкциями по запуску/тестам:
    - `bun install`
    - `bun dev`
    - `bun test`
  - Предположениями и ограничениями

Приложение должно запускаться локально указанными командами.

